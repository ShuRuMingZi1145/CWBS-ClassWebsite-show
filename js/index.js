function animateNumbers(){document.querySelectorAll(".stat-number").forEach(t=>{const e=+t.dataset.target;if(!e)return;const n=e/100;let i=0;const a=setInterval(()=>{i+=n,i>=e&&(i=e,clearInterval(a)),t.textContent=e>1e3?Math.floor(i).toLocaleString():Math.floor(i)},20)})}function initializePage(){AOS.init({duration:800,easing:"ease-in-out",once:!0,offset:100});const t=document.getElementById("navbar"),e=document.getElementById("back-to-top");t&&e&&(window.addEventListener("scroll",()=>{const n=document.body.classList.contains("win10")?"win10":"win11";if(window.scrollY>50){const e=n;t.classList.add(`${e}-shadow-md`),t.classList.remove(`${e}-shadow-sm`)}else{const e=n;t.classList.remove(`${e}-shadow-md`),t.classList.add(`${e}-shadow-sm`)}window.scrollY>300?(e.classList.remove("opacity-0","invisible"),e.classList.add("opacity-100","visible")):(e.classList.add("opacity-0","invisible"),e.classList.remove("opacity-100","visible"))}),e.addEventListener("click",()=>{window.scrollTo({top:0,behavior:"smooth"})}));const n=document.getElementById("mobile-menu-button"),i=document.getElementById("mobile-menu");n&&i&&n.addEventListener("click",()=>{i.classList.toggle("hidden")}),animateNumbers()}window.addEventListener("theme.render.ready",()=>{initializePage(),loadMarkdownArticles()}),setTimeout(()=>{if(!document.body.classList.contains("win10")&&!document.body.classList.contains("win11")){const t=window.siteConfig?.getUIStyle?.()||"win11";document.body.classList.add(t),initializePage(),loadMarkdownArticles()}},3e3);let notifications=[];async function parseMarkdownArticle(t){try{const e=await fetch(`article/md/${t}`);if(!e.ok)return null;const n=(await e.text()).split("\n");let i=t.replace(".md",""),a="",s=1;for(const t of n)t.startsWith("# ")?i=t.slice(2).trim():t.includes("发布日期：")&&(a=t.replace("> 发布日期：","").trim());return i.includes("分数")||i.includes("成绩")?s=2:(i.includes("活动")||i.includes("表彰")||i.includes("运动会"))&&(s=3),{id:t.replace(".md",""),title:i,date:a,level:s,path:`article/notice-template.html?md=md/${t}`}}catch(t){return null}}async function loadMarkdownArticles(){try{let t;try{const e=await fetch("config/article.json");if(!e.ok)throw new Error("Failed to fetch article.json");t=(await e.json()).articleFiles||[]}catch(e){t=["202510122130.md","202510122239.md"]}const e=[];for(const n of t){const t=await parseMarkdownArticle(n);t&&e.push(t)}e.sort((t,e)=>{const n=new Date(t.date.replace(/年/g,"-").replace(/月/g,"-").replace(/日/g,""));return new Date(e.date.replace(/年/g,"-").replace(/月/g,"-").replace(/日/g,""))-n}),notifications=e,renderNotifications()}catch(t){notifications=[{title:"关于2025-2026学年秋季运动会的通知",date:"2025-10-06",level:3,path:"article/notice-template.html?md=md/202510061035.md"},{title:"25-26 学年九上第一次质量检测（语文）统分通知",date:"2025-10-12",level:2,path:"article/notice-template.html?md=md/202510122130.md"}],renderNotifications()}}function sortByDateDesc(t){return t.sort((t,e)=>{const n=new Date(t.date.replace(/年/g,"-").replace(/月/g,"-").replace(/日/g,""));return new Date(e.date.replace(/年/g,"-").replace(/月/g,"-").replace(/日/g,""))-n})}function getLevelMeta(t){const e={1:{icon:"fa-file-text",color:"text-blue-500 bg-blue-100"},2:{icon:"fa-file-alt",color:"text-green-500 bg-green-100"},3:{icon:"fa-star",color:"text-yellow-500 bg-yellow-100"}};return e[t]||e[1]}function renderNotifications(){const t=document.getElementById("notifications-container");if(!t)return;t.innerHTML="";const e=sortByDateDesc([...notifications]),n=document.body.classList.contains("win10")?"win10":"win11";e.slice(0,6).forEach((e,i)=>{const a=getLevelMeta(e.level),s=document.createElement("div");s.className="win10"===n?"notification-card":"win11-card rounded-2xl p-6 card-hover glass-card",s.setAttribute("data-aos","fade-up"),s.setAttribute("data-aos-delay",(100*i).toString()),s.innerHTML="win10"===n?`\n                    <h3 class="notification-title">${e.title}</h3>\n                    <span class="notification-date">${e.date}</span>\n                    <div class="notification-content">\n                        <i class="fas ${a.icon}"></i>\n                    </div>\n                    <a href="${e.path}" class="notification-link">\n                        点击查看\n                    </a>\n                `:`\n                    <div class="flex items-start justify-between mb-4">\n                        <div class="flex items-center">\n                            <div class="w-12 h-12 rounded-xl ${a.color} flex items-center justify-center mr-4">\n                                <i class="fas ${a.icon}"></i>\n                            </div>\n                            <div>\n                                <h3 class="text-lg font-semibold text-gray-900">${e.title}</h3>\n                                <p class="text-sm text-gray-500 mt-1">${e.date}</p>\n                            </div>\n                        </div>\n                    </div>\n                    <a href="${e.path}" class="inline-flex items-center text-primary hover:text-primary/80 font-medium">\n                        点击查看 <i class="fas fa-arrow-right ml-2"></i>\n                    </a>\n                `,t.appendChild(s)})}