<!DOCTYPE html>
<html lang="zh-CN">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
        window.addEventListener('sidebar.theme.render.ready', function() {
            console.log('主题渲染完成，初始化课程表页面...');
            
            // 隐藏加载中占位符
            const pageLoader = document.getElementById('page-loader');
            if (pageLoader) {
                pageLoader.style.display = 'none';
            }
            
            // 显示页面内容
            const pageContent = document.querySelector('body');
            if (pageContent) {
                pageContent.style.visibility = 'visible';
            }
            
            AOS.init({
                duration: 1000,
                once: true
            });
            
            // 设置页面标题
            document.getElementById('page-title').textContent = '了解我们的课程';
            
            // 加载内容
        loadAboutContent();
        
        // 初始化移动端菜单功能
        initMobileMenu();
        
        // 初始化返回顶部按钮
        initBackToTop();
        
        console.log('课程表页面初始化完成');
    });
    
    // 移动端菜单功能
    function initMobileMenu() {
        const mobileMenuBtn = document.getElementById('mobile-menu-button');
        const mobileMenu = document.getElementById('mobile-menu');
        
        if (mobileMenuBtn && mobileMenu) {
            mobileMenuBtn.addEventListener('click', function() {
                const isOpen = mobileMenu.style.display === 'block';
                mobileMenu.style.display = isOpen ? 'none' : 'block';
                
                // 添加动画效果
                if (!isOpen) {
                    mobileMenu.style.opacity = '0';
                    mobileMenu.style.transform = 'translateY(-10px)';
                    
                    setTimeout(() => {
                        mobileMenu.style.opacity = '1';
                        mobileMenu.style.transform = 'translateY(0)';
                    }, 10);
                }
            });
            
            // 点击菜单外区域关闭菜单
            document.addEventListener('click', function(event) {
                if (!mobileMenu.contains(event.target) && !mobileMenuBtn.contains(event.target)) {
                    mobileMenu.style.display = 'none';
                }
            });
        }
    }
    
    // 返回顶部按钮功能
    function initBackToTop() {
        const backToTopBtn = document.getElementById('back-to-top');
        
        if (backToTopBtn) {
            // 监听滚动事件
            window.addEventListener('scroll', function() {
                if (window.pageYOffset > 300) {
                    backToTopBtn.classList.remove('opacity-0', 'invisible');
                    backToTopBtn.classList.add('opacity-100', 'visible');
                } else {
                    backToTopBtn.classList.remove('opacity-100', 'visible');
                    backToTopBtn.classList.add('opacity-0', 'invisible');
                }
            });
            
            // 点击返回顶部
            backToTopBtn.addEventListener('click', function() {
                window.scrollTo({
                    top: 0,
                    behavior: 'smooth'
                });
            });
        }
    }
    
    function loadAboutContent() {
            const contentElement = document.getElementById('content');
            if (contentElement) {
                // 这里应该有具体的内容加载逻辑
                contentElement.innerHTML = `
                    <div class="space-y-8">
                        <div class="glass-card p-6 rounded-xl">
                            <h2 class="text-2xl font-bold mb-4">七年级课程表</h2>
                            <div style="display:flex;flex-direction:column;align-items:center;gap:12px;">
                                <div id="timetable-container" style="width:100%;max-width:760px;">
                                    <!-- 表格内容从 /article/md/timetable.md 加载 -->
                                </div>
                            </div>
                        </div>
                    </div>
                `;

                // 从 /article/md/timetable.md 加载表格内容并插入到占位容器
                (function loadExternalTable(){
                    const path = '../article/md/timetable.md';
                    fetch(path).then(res => {
                        if (!res.ok) throw new Error('无法加载表格: ' + res.status);
                        return res.text();
                    }).then(html => {
                        const container = document.getElementById('timetable-container');
                        if (container) container.innerHTML = html;
                    }).catch(err => {
                        console.error(err);
                    });
                })();

            }
        }</script></body></html>
